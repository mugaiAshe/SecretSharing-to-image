# SecretSharing-to-image
面向图像的秘密共享，采用shamir门限法进行秘密共享，再通过拉格朗日插值法进行解密恢复原图像。选取素数p=257，将所有255和256改为255并在数据尾部加上一个该数值对255的余数值数据。

创新：将秘密值作为多项式中0到r-1次项的系数，则一个多项式可以存r个秘密值，且理论上仍然是安全性良好的，能大大提高计算效率。在r增多时，多项式的次数提高，但数量能减少，计算复杂度不会随r大量增高。

划分图像信息为r份时，若图像数据不能整除r，就需要填充。将阴影图像从一维数据转为二维图像时也可能需要填充。jpg等有损的图像储存格式不能用于图像秘密共享，本次使用了png这个无损的图像储存形式。拉格朗日插值法恢复数据时，先根据key值计算一个r阶方阵sqare，再用矩阵乘法就能求解。

使用Shamir门限时，没有必要选取随机值为key，key值也可以不用保密，可以直接存为阴影图像名字（key.png），被攻击者猜到key也无碍，因为阴影图像中的数据才是重要的。本次生成n份阴影图像时选用key=range（n）+1，即整数1到n。恢复时可以从n份中随机选取r份阴影图像，但选取key时没有必要用随机数。

为区分原始图像数据和填充信息，使图像得以恢复，我在padimg（）中将填充值设置为填充长度，unpad（）可以检查与最后一位数值相同值的数量是否等于这个数值来判断是否进行填充以及判断填充长度。

读入图像并分为r份时，为了能恢复形状，我将图像大小信息（长度和宽度）也加密储存，即将图像数据展为一维数值时在尾部加上长度和高度信息。且应以a*256+b的形式存储长度和宽度，因为读入图像数据时的数据类型限制导致其值不能超过255。
